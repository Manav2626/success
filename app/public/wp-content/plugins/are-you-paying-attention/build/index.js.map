{"version":3,"file":"index.js","mappings":"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","sources":["webpack://are-you-paying-attention/./src/index.scss?bb7c","webpack://are-you-paying-attention/external window \"React\"","webpack://are-you-paying-attention/external window [\"wp\",\"components\"]","webpack://are-you-paying-attention/webpack/bootstrap","webpack://are-you-paying-attention/webpack/runtime/compat get default export","webpack://are-you-paying-attention/webpack/runtime/define property getters","webpack://are-you-paying-attention/webpack/runtime/hasOwnProperty shorthand","webpack://are-you-paying-attention/webpack/runtime/make namespace object","webpack://are-you-paying-attention/./src/index.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport {};","module.exports = window[\"React\"];","module.exports = window[\"wp\"][\"components\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import \"./index.scss\"\nimport {TextControl, Flex, FlexBlock, FlexItem, Button, Icon} from \"@wordpress/components\"\n\n//function to handle save/update post only when correct answer is selected\n(function (){\n    let locked = false\n    wp.data.subscribe(function(){\n        // const results = wp.data.select(\"code/block-editor\").getBlocks() -> gives array of data for each block on wordpress current page and live\n        const results = wp.data.select(\"core/block-editor\").getBlocks().filter(function(block){\n            return block.name == \"ourplugin/are-you-paying-attention\" && block.attributes.correctAnswer == undefined\n        })\n        if (results.length && locked == false ){\n            locked = true\n            wp.data.dispatch(\"core/editor\").lockPostSaving(\"noanswer\")\n        }\n        if (!results.length && locked ){\n            locked = false\n            wp.data.dispatch(\"core/editor\").unlockPostSaving(\"noanswer\")\n        }\n    })\n})()\n\n//wp wordpress uses as browser's global scope, inside that blocks. wp-blocks is set as \"dependency\" in index.php to load before our js file\nwp.blocks.registerBlockType(\"ourplugin/are-you-paying-attention\",{\n    title: \"Are you paying attention\",\n    icon: \"smiley\",\n    category: \"common\",\n    attributes:{\n        question: {type: \"string\"},\n        answers: {type: \"array\", default: [\"\"]},\n        correctAnswer: {type: \"number\", default: undefined}\n    },\n    edit: EditComponent,\n// Whenevr changes made in code can lead to error on editor, cause nothing is saved before changes, CAN USE DEPRICATED, but NOT the best menthod, it's manual. USE PHP and return NULL to save function \n    save: function(props){\n        //what will see on actual user screen\n        return null\n    },\n    \n})\n\n\n\nfunction EditComponent (props){\n\n\n    //for Question field function created\n    function updateQuestion(value){\n        props.setAttributes({question: value})\n    }\n    function deleteAnswer(indexToDelete){\n        //no changes directly on array, makes a copy and makes changes \n        const newAnswers = props.attributes.answers.filter(function(x, index){\n            return index != indexToDelete //return true for all other than math \n        })\n        props.setAttributes({answers: newAnswers})\n\n        if (indexToDelete ==  props.attributes.correctAnswer){\n            props.setAttributes({correctAnswer: undefined})\n        }\n    }\n    function markAsCorrect(index){\n        props.setAttributes({correctAnswer: index})\n    }\n    //what will see on post editor screen\n    return (\n        <div className=\"paying-attention-edit-block\">\n            <TextControl label=\"Question:\" value={props.attributes.question} onChange={updateQuestion} style={{fontSize: \"20px\"}}/>  {/* Taking advantage of Wordpress Text Control instead of basic HTML Input field */}\n            <p style={{fontSize:\"13px\", margin:\"20px 0 8px 0\"}}>Answers:</p>\n            {props.attributes.answers.map(function (answer, index){\n                return (\n                    <Flex>\n                        <FlexBlock><TextControl value={answer} onChange={newValue => {\n                            const newAnswers = props.attributes.answers.concat([])\n                            newAnswers[index] = newValue\n                            props.setAttributes({answers: newAnswers})}}/> </FlexBlock>\n                        <FlexItem><Button onClick={()=> markAsCorrect(index)}><Icon className=\"mark-as-correct\" icon={props.attributes.correctAnswer == index? \"star-filled\": \"star-empty\"}/></Button></FlexItem>\n                        <FlexItem><Button isLink className=\"attention-delete\" onClick={()=> deleteAnswer(index)}>Delete</Button></FlexItem>\n                    </Flex>\n                )\n            })}\n            <Button isPrimary onClick={()=> {props.setAttributes({answers: props.attributes.answers.concat([\"\"])})}}>Add another answer</Button> {/* Concat will return new copy of the array  */}\n        </div>\n    )\n    \n\n}\n\n\n/*\nTo create a block by self, Have 2 things edit && save\nedit-> for editor\nsave-> what customer will see \nNow to use function\n    - mention attributes before edit\nWe want LIVE updates and NOT ON SAVE\n    - add onChange\n    - create function for it\nFor creating rows, icons and buttons, we could use HTML, but will use Wordpress to do it for us by Importing them\n*/\n\n"],"names":["TextControl","Flex","FlexBlock","FlexItem","Button","Icon","locked","wp","data","subscribe","results","select","getBlocks","filter","block","name","attributes","correctAnswer","undefined","length","dispatch","lockPostSaving","unlockPostSaving","blocks","registerBlockType","title","icon","category","question","type","answers","default","edit","EditComponent","save","props","updateQuestion","value","setAttributes","deleteAnswer","indexToDelete","newAnswers","x","index","markAsCorrect","createElement","className","label","onChange","style","fontSize","margin","map","answer","newValue","concat","onClick","isLink","isPrimary"],"sourceRoot":""}